<!DOCTYPE HTML>
<html>
  <head>

    <meta charset="UTF-8">


    <link rel="stylesheet" href="css/loginstyle.css">
    <title>Proyecto Covid</title>

    <script src='/socket.io/socket.io.js'></script> 
    <script> var socket = io.connect('http://54.196.238.128:4500/');</script>
  </head>
  <body>
    <h1>Pagina Principal</h1>
    <h2></h2>
    <p>En esta pagina puedes ingresar los datos del usuario</p>
    <h3>Digite sus datos de usuario</h3>
    <section class="login" >
      <h2>LOGIN</h2>
      <form id="validacion" class="datos"  >
        <input type="text" id="username"  placeholder="nombre de usuario">
        <input type="password" id="password"  placeholder="password">
        <p>
        <input type="submit" value="Iniciar Sesion">
      </form>

      <p>Si no se encuentra registrado puede hacerlo dando click <a href=registro.html>aqui</a> </p>
    </section>
    
    <script>

      const form = document.getElementById('validacion')
      
      form.addEventListener('submit', (e) => {

        //var SW=0;

        nombre = e.target.username.value;
        password = e.target.password.value;

        var valid = [];

        valid.push(nombre);
        valid.push(password);

        socket.emit("validar",valid);

        socket.on('loginResp',info=>{
          console.log("info: "+info);
          if (info.length ==0){
            e.preventDefault();
            alert("Su usuario o contrase√±a son incorrectos");
            e.stopImmediatePropagation();
            
          }else{

          }

        });
        
        
        form.removeEventListener();
      });
    </script>
    
  </body>
</html>